#ifndef toscaIntr_h
#define toscaIntr_h

#include <stdint.h>

#define INTR_VME_LVL_1       0x01
#define INTR_VME_LVL_2       0x02
#define INTR_VME_LVL_3       0x04
#define INTR_VME_LVL_4       0x08
#define INTR_VME_LVL_5       0x10
#define INTR_VME_LVL_6       0x20
#define INTR_VME_LVL_7       0x40
#define INTR_VME_LVL(n)     (INTR_VME_LVL_1<<((n)-1))
#define INTR_VME_LVL_ANY     0x7f
#define INTR_VME_SYSFAIL    0x100
#define INTR_VME_ACFAIL     0x200
#define INTR_VME_ERROR      0x400

#define INTR_USER1_INTR0    0x000100000000ULL
#define INTR_USER1_INTR1    0x000200000000ULL
#define INTR_USER1_INTR2    0x000400000000ULL
#define INTR_USER1_INTR3    0x000800000000ULL
#define INTR_USER1_INTR4    0x001000000000ULL
#define INTR_USER1_INTR5    0x002000000000ULL
#define INTR_USER1_INTR6    0x004000000000ULL
#define INTR_USER1_INTR7    0x008000000000ULL
#define INTR_USER1_INTR8    0x010000000000ULL
#define INTR_USER1_INTR9    0x020000000000ULL
#define INTR_USER1_INTR10   0x040000000000ULL
#define INTR_USER1_INTR11   0x080000000000ULL
#define INTR_USER1_INTR12   0x100000000000ULL
#define INTR_USER1_INTR13   0x200000000000ULL
#define INTR_USER1_INTR14   0x400000000000ULL
#define INTR_USER1_INTR15   0x800000000000ULL
#define INTR_USER1_INTR(n) (INTR_USER1_INTR0<<(n))
#define INTR_USER1_ANY      0xffff00000000ULL

#define INTR_USER2_INTR0    0x0001000000000000ULL
#define INTR_USER2_INTR1    0x0002000000000000ULL
#define INTR_USER2_INTR2    0x0004000000000000ULL
#define INTR_USER2_INTR3    0x0008000000000000ULL
#define INTR_USER2_INTR4    0x0010000000000000ULL
#define INTR_USER2_INTR5    0x0020000000000000ULL
#define INTR_USER2_INTR6    0x0040000000000000ULL
#define INTR_USER2_INTR7    0x0080000000000000ULL
#define INTR_USER2_INTR8    0x0100000000000000ULL
#define INTR_USER2_INTR9    0x0200000000000000ULL
#define INTR_USER2_INTR10   0x0400000000000000ULL
#define INTR_USER2_INTR11   0x0800000000000000ULL
#define INTR_USER2_INTR12   0x1000000000000000ULL
#define INTR_USER2_INTR13   0x2000000000000000ULL
#define INTR_USER2_INTR14   0x4000000000000000ULL
#define INTR_USER2_INTR15   0x8000000000000000ULL
#define INTR_USER2_INTR(n) (INTR_USER2_INTR0<<(n))
#define INTR_USER2_ANY      0xffff000000000000ULL

extern int toscaIntrDebug;

int toscaWaitForIntr(uint64_t mask, uint8_t vector, struct timeval *timeout);
/* mask is any combination of the INTR_* bits */
/* vector is for VME_LVL_* only and is ignored for other INTR_* bits */
/* timeout may be NULL to wait forever */
/* returns the INTR_* flag that triggered the interrupt or -1 on timeout */

#endif
